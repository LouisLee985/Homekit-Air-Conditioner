
# Homekit_Air_Conditioner_Remote
[![Release](https://img.shields.io/github/v/tag/LouisLee985/Homekit-Air-Conditioner-Remote?color=red&label=release)](https://github.com/LouisLee985/Homekit-Air-Conditioner-Remote/releases/latest)

<p align="center">
<img src="/image/HomeApp_Icon_2.svg" width="20%"/>
</p>

<div align="center">
<svg id="Livello_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0"
  viewBox="0 0 2860 1024" height="60">
  <g>
	<path fill="#FFFFFF" d="M227.6,0h568.9C922.1,0,1024,101.9,1024,227.6v568.9
		c0,125.7-101.9,227.6-227.6,227.6H227.6C101.9,1024,0,922.1,0,796.4V227.6C0,101.9,101.9,0,227.6,0z"/>
	<g>
		<path fill="#F79918" d="M883.2,413.1l-70.4-55.6l0,0V231.1c0-8.6-3.4-11-9.5-11h-64.4c-7,0-11.3,1.4-11.3,11v59.1l0,0
			C634.5,216.7,533.6,137,529.8,134c-7.6-6-12.3-7.6-17.8-7.6c-5.4,0-10.1,1.6-17.8,7.6c-7.6,6-343.2,271.1-353.4,279.1
			c-12.4,9.8-8.9,23.9,4.9,23.9h65.5v355.6c0,23,9.2,32.2,31.1,32.2h539.4c21.9,0,31.1-9.2,31.1-32.2V436.9h65.5
			C892.1,436.9,895.6,422.9,883.2,413.1z M757.6,742.6c0,15.9-8.2,26.9-24.8,26.9H291.1c-16.6,0-24.8-11-24.8-26.9V410.3
			c0-19.3,8.4-31.6,18.1-39.2l212.4-167.7c5.6-4.4,10.4-6.3,15.1-6.3s9.5,1.9,15.1,6.4l212.4,167.7c9.6,7.6,18.1,19.9,18.1,39.2
			V742.6z"/>
		<path fill="#FAAC28" d="M739.6,371.1L527.1,203.3c-5.6-4.4-10.6-6.3-15.1-6.3c-4.6,0-9.5,1.9-15.1,6.4L284.4,371.1
			c-9.6,7.6-18.1,19.9-18.1,39.2v332.3c0,15.9,8.2,26.9,24.8,26.9h441.7c16.6,0,24.8-11,24.8-26.9V410.3
			C757.6,391,749.2,378.7,739.6,371.1z M702.6,692.7c0,14.8-8.4,21.7-20.7,21.7H342.2c-12.3,0-20.7-6.9-20.7-21.7V433.2
			c0-14.4,3.4-22.6,13.6-30.7c5.8-4.6,160.3-126.6,164.4-129.8c4.1-3.3,8.5-4.9,12.5-4.9c4,0,8.4,1.7,12.5,4.9
			c4.1,3.3,158.6,125.3,164.4,129.8c10.2,8.1,13.6,16.4,13.6,30.7L702.6,692.7z"/>
		<path fill="#FDBF47" d="M688.9,402.5c-5.8-4.5-160.3-126.6-164.4-129.8c-4.1-3.3-8.5-4.9-12.5-4.9c-4,0-8.4,1.7-12.5,4.9
			c-4.1,3.3-158.6,125.3-164.4,129.8c-10.2,8.1-13.6,16.4-13.6,30.7v259.5c0,14.8,8.4,21.7,20.7,21.7h339.7
			c12.3,0,20.7-6.9,20.7-21.7V433.2C702.5,418.9,699.1,410.6,688.9,402.5z M647.4,642.8c0,11.9-6.6,16.5-15.6,16.5H392.2
			c-9,0-15.6-4.6-15.6-16.5V456.2c0-8.3,0-14.9,9.1-22.2c6-4.8,113.2-89.4,116.4-91.9s6.4-3.8,9.9-3.8c3.6,0.1,7.1,1.5,9.9,3.8
			c3.2,2.5,110.4,87.1,116.4,91.9c9.1,7.3,9.1,13.9,9.1,22.2L647.4,642.8z"/>
		<path fill="#FFD364" d="M638.3,434c-6-4.8-113.2-89.4-116.4-91.9c-2.8-2.4-6.3-3.7-9.9-3.8c-3.5,0-6.7,1.3-9.9,3.8
			S391.6,429.2,385.7,434c-9.1,7.3-9.1,13.9-9.1,22.2v186.6c0,11.9,6.6,16.5,15.6,16.5h239.5c9,0,15.6-4.6,15.6-16.5V456.2
			C647.4,447.8,647.4,441.2,638.3,434z M592.3,593c0,9.2-4.6,11.2-11,11.2H442.8c-6.4,0-11-2.1-11-11.2V479.1
			c0-6.4,2.9-12.6,7.8-16.6c2.8-2.3,63-49.4,65.1-51.1c4.2-3.5,10.4-3.5,14.6,0c2.2,1.7,62.3,48.8,65.1,51.1
			c5,4.1,7.9,10.2,7.8,16.6L592.3,593z"/>
		<path fill="#FFF080" d="M512,604.1h69.2c6.4,0,11-2.1,11-11.2V479.1c0-6.4-2.9-12.6-7.8-16.6c-2.8-2.3-63-49.4-65.1-51.1
			c-4.2-3.5-10.4-3.5-14.6,0c-2.1,1.7-62.3,48.8-65.1,51.1c-5,4.1-7.9,10.2-7.8,16.6v113.8c0,9.2,4.6,11.2,11,11.2L512,604.1z"/>
	</g>
</g>
</svg>
</div>

<div align="center">
<br><img src="/image/homekit1.jpg"  width="90%"/>
</div>


### WiFi配网


1. 上电后，ESP8266在未联网/断网时LED 2/S闪烁，生成ESP_XXXXXX的热点，XXXXXX是8266芯片的MAC。
2. 手机连接该热点，自动弹出配网页面。如果未自动弹出可手动访问192.168.4.1。
3. Configure WiFi，选择 WiFi，输入密码，Save，连接成功后会自动退出配网模式并关闭 ESP_XXXXXX 热点。

<div align="center">
<br><img src="/image/WiFi_Configure.jpg"  width="80%"/>
</div>

### Add accessories 添加 HomeKit 配件

* Homekit 配对码：985-21-985。
   
<div align="center">
<br><img src="/image/qrcode.jpg"  width="20%"/>
</div>

   　
* [向“家庭”App 添加配件](https://support.apple.com/zh-cn/HT204893) ３种途径：
<!-- 
https://support.apple.com/en-us/HT204893 
-->


 <br>
　　１．使用 iPhone 或 iPad 上的相机扫描上面的二维码。　＂家庭＂二维码　　在＂家庭＂中打开
<br>
　　２．或者　　打开“家庭”App，然后轻点“添加”；　　轻点“添加配件”。

<div align="center">
<br><img src="/image/IMG_3209.jpg"  width="80%"/>
</div>
<br>
 
　　３．也可以输入配对码。

<div align="center">
<br><img src="/image/Add_accessories3.jpg"  width="80%"/>
</div>

<!-- 
<div align="center">
<br><img src="/image/Add_accessories1.jpg"  width="90%"/>
<br><img src="/image/Add_accessories2.jpg"  width="80%"/>
</div>
-->
<br>

### 空调功能

1. Apple Homekit App 空调功能：开机，关机，制冷，制热，风速，当前环境温湿度显示。 
<br>基于 [HomeKit Accessory Protocol Specification(Noncommercial Version) Release R2](https://developers.apple.com/homekit/faq) ，有 *`此配件尚未经过认证可与Homekit配合使用， 因此部分功能可能不可用。`* 字样。
2. 如果需要出门在外时远程控制 HomeKit 配件，请将 HomePod、HomePod mini、Apple TV 或 iPad  [设置为家居中枢。 ](https://support.apple.com/zh-cn/HT207057)
3. 红外信号反馈：普通空调遥控器进行 开机，关机，制冷，制热，风速等 Apple Homekit 协议支持的动作时，Homekit App 会同步更新状态。


<div align="center">
<br><img src="/image/HAP-Specification-Non-Commercial-Version.jpg"  width="60%"/>
<br><img src="/image/Add_accessories3.PNG"  width="80%"/>
</div>

### Button IO0 按键定义

1. 长按 IO0 按键5-10S，LED 2/S 闪烁，松开按键, 空调遥控识别：15S 内普通空调遥控器对准此项目上的遥控接收头(IR_R)按一下开关机键，等待 LED 闪烁停止。IRremoteESP8266 库，支持市场上绝大多数[空调品牌](https://github.com/crankyoldgit/IRremoteESP8266/blob/master/SupportedProtocols.md#ir-protocols-supported-by-this-library)。
2. 长按 IO0 按键 10-15S，LED 2/S 闪烁，4/S 闪烁，松开按键，恢复设置：抹除 Homekit 配对信息，抹除 Wifi 连接信息，抹除空调遥控识别信息。
 



# Thanks
* [HomeKit Accessory Protocol Specification(Noncommercial Version) Release R2](https://developers.apple.com/homekit/faq)
* [arduino-sht](https://github.com/Sensirion/arduino-sht) 
* [WiFiManager](https://github.com/tzapu/WiFiManager)
* [IRremoteESP8266](https://github.com/crankyoldgit/IRremoteESP8266) 
* [Arduino-HomeKit-ESP8266](https://github.com/Mixiaoxiao/Arduino-HomeKit-ESP8266) 
* [arduino-button-long-press-short-press](https://arduinogetstarted.com/tutorials/arduino-button-long-press-short-press)
*  https://github.com/openscopeproject/InteractiveHtmlBom
*  https://github.com/yanranxiaoxi/InteractiveHtmlBom

<div align="center">  
<img src="https://myoctocat.com/assets/images/base-octocat.svg"  width="10%"/> 
</div>

